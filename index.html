<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DREAM OS ULTIMATE v13.0 | SIF ERP COMPLETE</title>
    <style>
        /* ========== PROFESSIONAL CSS ========== */
        * {
            margin: 0; 
            padding: 0; 
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg: #0a0f1e; 
            --card: #151a2d; 
            --gold: #fbbf24;
            --green: #10b981; 
            --red: #ef4444; 
            --blue: #3b82f6;
            --purple: #8b5cf6; 
            --orange: #f97316;
            --dark: #0f172a;
        }

        body {
            background: var(--bg); 
            color: #e2e8f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            touch-action: pan-y;
        }

        /* ========== HEADER ========== */
        .header {
            text-align: center;
            padding: 15px;
            background: linear-gradient(180deg, var(--bg) 0%, var(--dark) 100%);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid var(--green);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .shalawat {
            background: rgba(251, 191, 36, 0.15);
            padding: 8px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.75rem;
            line-height: 1.4;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .arabic {
            color: var(--gold);
            font-weight: 700;
            direction: rtl;
            font-size: 0.85rem;
        }

        .translation {
            color: #94a3b8;
            font-size: 0.7rem;
            margin-top: 4px;
        }

        /* ========== MAIN DASHBOARD ========== */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            padding: 15px;
            padding-bottom: 80px; /* Space for bottom nav */
        }

        .hub-card {
            background: var(--card);
            border: 2px solid;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .hub-card:active {
            transform: scale(0.98);
            background: rgba(59, 130, 246, 0.1);
        }

        .hub-title {
            font-size: 1.3rem;
            font-weight: 800;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .hub-subtitle {
            font-size: 0.8rem;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ========== VIEW SYSTEM ========== */
        .view {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg);
            z-index: 2000;
            padding: 15px;
            overflow-y: auto;
            padding-bottom: 80px;
        }

        .view-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #334155;
        }

        .view-title {
            color: var(--gold);
            font-size: 1.5rem;
            font-weight: 800;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 10px;
        }

        .close-btn:active {
            background: rgba(255,255,255,0.1);
        }

        /* ========== BUTTONS ========== */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            margin: 8px 0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: opacity 0.2s;
        }

        .btn:active {
            opacity: 0.85;
        }

        .btn-primary { background: var(--green); }
        .btn-danger { background: var(--red); }
        .btn-warning { background: var(--orange); }
        .btn-secondary { background: var(--blue); }
        .btn-purple { background: var(--purple); }
        .btn-gold { background: var(--gold); color: black; font-weight: 800; }
        .btn-dark { background: #334155; }

        /* ========== FORMS ========== */
        .form-group { margin-bottom: 18px; }
        .form-label { 
            display: block; 
            color: var(--gold); 
            font-size: 0.95rem; 
            margin-bottom: 8px; 
            font-weight: 700; 
        }
        .form-input {
            width: 100%;
            padding: 16px;
            background: #1e293b;
            border: 2px solid #475569;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            transition: border-color 0.2s;
        }
        .form-input:focus { 
            border-color: var(--gold); 
            outline: none; 
            box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.2);
        }
        .form-textarea { 
            min-height: 120px; 
            resize: vertical;
            line-height: 1.5;
        }

        /* ========== CAMERA SYSTEM ========== */
        .camera-container {
            position: relative;
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid var(--blue);
            background: #000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }

        #cameraPreview {
            width: 100%;
            height: 280px;
            object-fit: cover;
            background: #1e293b;
        }

        .camera-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            padding: 12px;
            background: rgba(0,0,0,0.85);
        }

        .camera-btn {
            padding: 14px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 800;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .photo-preview {
            margin: 20px 0;
            padding: 15px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            border: 2px solid var(--gold);
        }

        /* ========== BOTTOM NAVIGATION ========== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--dark);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 2px solid #334155;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
        }

        .nav-btn {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 0.85rem;
            text-align: center;
            padding: 8px 5px;
            cursor: pointer;
            flex: 1;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .nav-btn:active {
            background: rgba(59, 130, 246, 0.15);
            color: var(--gold);
            transform: scale(0.95);
        }

        .nav-btn.active {
            color: var(--gold);
            font-weight: 800;
            background: rgba(251, 191, 36, 0.1);
        }

        .nav-icon {
            font-size: 1.4rem;
            margin-bottom: 4px;
        }

        /* ========== LOADER ========== */
        #loader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(30, 41, 59, 0.3);
            border-top: 4px solid var(--green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== TOAST ========== */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--green);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 800;
            z-index: 4000;
            display: none;
            box-shadow: 0 6px 25px rgba(0,0,0,0.4);
            text-align: center;
            max-width: 90%;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .toast-error { background: var(--red); }
        .toast-warning { background: var(--orange); }
        .toast-info { background: var(--blue); }

        /* ========== ALERT BOX ========== */
        .alert-box {
            background: rgba(239, 68, 68, 0.15);
            border-left: 4px solid var(--red);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.15);
            border-left: 4px solid var(--blue);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        /* ========== TIME GRID ========== */
        .time-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 12px;
            align-items: center;
        }

        .time-separator {
            text-align: center;
            color: var(--gold);
            font-size: 1.8rem;
            font-weight: 900;
        }

        /* ========== MODAL ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.97);
            z-index: 3000;
            padding: 20px;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--card);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            border: 3px solid var(--gold);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        /* ========== STATUS BAR ========== */
        .status-bar {
            position: fixed;
            bottom: 70px;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            border-top: 1px solid #334155;
            border-bottom: 1px solid #334155;
            z-index: 900;
            backdrop-filter: blur(10px);
        }

        /* ========== DATA TABLE ========== */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        .data-table th {
            background: rgba(59, 130, 246, 0.2);
            color: var(--blue);
            padding: 12px;
            text-align: left;
            font-weight: 800;
            border-bottom: 2px solid var(--blue);
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #334155;
            color: #e2e8f0;
        }

        .data-table tr:active {
            background: rgba(59, 130, 246, 0.1);
        }

        /* ========== INVENTORY CARD ========== */
        .inventory-card {
            background: var(--card);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid #334155;
        }

        .item-name {
            color: white;
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .item-details {
            color: #94a3b8;
            font-size: 0.85rem;
            display: flex;
            justify-content: space-between;
        }

        /* ========== SCAN RESULT ========== */
        .scan-result {
            background: rgba(16, 185, 129, 0.15);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--green);
        }
    </style>
</head>
<body>

    <!-- LOADER -->
    <div id="loader">
        <div class="spinner"></div>
        <div style="margin-top: 20px; color: var(--gold); font-size: 1.2rem; font-weight: 800;">
            DREAM OS v13.0
        </div>
        <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 8px; text-align: center;">
            Quantum AI System Initializing<br>
            DeepSeek ‚Ä¢ Qwen ‚Ä¢ Gemini
        </div>
    </div>

    <!-- HEADER -->
    <div class="header">
        <div onclick="system.architectTrigger()" style="font-size: 3rem; cursor: pointer; margin-bottom: 5px;">üöÄ</div>
        <h1 style="color: var(--gold); font-size: 1.6rem; letter-spacing: 1px;">
            DREAM OS ULTIMATE v13.0
        </h1>
        <div style="color: var(--green); font-size: 0.85rem; margin-top: 3px;">
            SIF AL FIKRI ERP ‚Ä¢ 20 SARANA ‚Ä¢ INVENTORY SYSTEM
        </div>
        
        <!-- SHALAWAT COMPLETE -->
        <div class="shalawat">
            <div class="arabic">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸíŸÖŸê</div>
            <div class="translation">Dengan nama Allah Yang Maha Pengasih Lagi Maha Penyayang</div>
            <div class="arabic" style="margin-top: 6px;">ÿßŸéŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿµŸéŸÑŸêŸë ÿπŸéŸÑŸéŸâ ÿ≥ŸéŸäŸêŸëÿØŸêŸÜŸéÿß ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸç ŸàŸéÿπŸéŸÑŸéŸâ ÿ¢ŸÑŸê ÿ≥ŸéŸäŸêŸëÿØŸêŸÜŸéÿß ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸç</div>
            <div class="translation">Ya Allah, limpahkanlah shalawat kepada junjungan kami Nabi Muhammad dan keluarganya</div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="mainView" class="main-grid">
        <!-- SERVICE HUB -->
        <div class="hub-card" style="border-color: var(--blue);" onclick="system.showView('service')">
            <div class="hub-title">
                <div>üèõÔ∏è</div>
                <div>SERVICE HUB</div>
            </div>
            <div class="hub-subtitle">Booking ‚Ä¢ K3 ‚Ä¢ Security ‚Ä¢ Reports</div>
            <div style="margin-top: 12px; font-size: 0.85rem; color: #94a3b8; line-height: 1.4;">
                Manajemen 22 sarana, laporan K3, patroli keamanan, dan sistem pelaporan terintegrasi
            </div>
        </div>

        <!-- ASSET HUB -->
        <div class="hub-card" style="border-color: var(--purple);" onclick="system.showView('asset')">
            <div class="hub-title">
                <div>üì¶</div>
                <div>ASSET HUB</div>
            </div>
            <div class="hub-subtitle">Inventory ‚Ä¢ Warehouse ‚Ä¢ QR ‚Ä¢ Print</div>
            <div style="margin-top: 12px; font-size: 0.85rem; color: #94a3b8; line-height: 1.4;">
                Sistem inventaris ISO, manajemen gudang, QR scanner, dan smart printing system
            </div>
        </div>

        <!-- ADMIN HUB (HIDDEN DEFAULT) -->
        <div id="adminCard" class="hub-card" style="border-color: var(--gold); display: none;" onclick="system.showView('admin')">
            <div class="hub-title">
                <div>üõ∞Ô∏è</div>
                <div>COMMAND HUB</div>
            </div>
            <div class="hub-subtitle">Admin ‚Ä¢ Monitor ‚Ä¢ Database ‚Ä¢ Settings</div>
            <div style="margin-top: 12px; font-size: 0.85rem; color: #fbbf24; line-height: 1.4;">
                Full system control, monitoring, database management, and system configuration
            </div>
        </div>

        <!-- QUICK ACTIONS -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
            <button class="btn btn-dark" onclick="system.showModal('loginModal')">
                üîê SYSTEM LOGIN
            </button>
            <button class="btn btn-gold" onclick="system.quickDemo()">
                üé¨ QUICK DEMO
            </button>
        </div>

        <!-- SYSTEM STATUS -->
        <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 12px;">
            <div style="color: var(--blue); font-weight: 800; font-size: 0.95rem; margin-bottom: 8px;">
                ü§ñ QUANTUM AI SYSTEM STATUS
            </div>
            <div style="font-size: 0.8rem; color: #94a3b8;">
                ‚Ä¢ <span id="aiStatus" style="color: var(--green);">Active</span> - DeepSeek, Qwen, Gemini
                <br>‚Ä¢ <span id="userStatus" style="color: var(--gold);">GUEST MODE</span>
                <br>‚Ä¢ 20 Sarana ‚Ä¢ Inventory ISO Standard
            </div>
        </div>
    </div>

    <!-- ==================== SERVICE VIEWS ==================== -->

    <!-- SERVICE MAIN VIEW -->
    <div id="serviceView" class="view">
        <div class="view-header">
            <div class="view-title">SERVICE HUB</div>
            <button class="close-btn" onclick="system.showMain()">√ó</button>
        </div>

        <button class="btn btn-primary" onclick="system.showView('booking')">
            <div>üìÖ</div>
            <div>BOOKING SARANA (22 UNIT)</div>
        </button>

        <button class="btn btn-danger" onclick="system.showView('k3')">
            <div>üõ°Ô∏è</div>
            <div>LAPORAN K3 + KAMERA</div>
        </button>

        <button class="btn btn-warning" onclick="system.showView('security')">
            <div>üíÇ</div>
            <div>LAPORAN HARIAN SEKURITI</div>
        </button>

        <button class="btn btn-secondary" onclick="system.showView('reports')">
            <div>üìä</div>
            <div>REPORTS & ANALYTICS</div>
        </button>

        <div class="info-box">
            <div style="color: var(--blue); font-weight: 800; font-size: 0.95rem; margin-bottom: 8px;">
                üìã SERVICE SYSTEM OVERVIEW
            </div>
            <div style="color: #94a3b8; font-size: 0.85rem;">
                ‚Ä¢ 20 sarana dengan sistem booking terintegrasi
                <br>‚Ä¢ Laporan K3 dengan bukti foto wajib
                <br>‚Ä¢ Patroli keamanan dengan check-in setiap 2 jam
                <br>‚Ä¢ Semua laporan otomatis ke WA Pak Erwin
            </div>
        </div>
    </div>

    <!-- BOOKING VIEW - 22 SARANA -->
    <div id="bookingView" class="view">
        <div class="view-header">
            <div class="view-title">BOOKING SARANA</div>
            <button class="close-btn" onclick="system.showView('service')">√ó</button>
        </div>

        <!-- SARANA SELECTION - 22 UNIT LENGKAP -->
        <div class="form-group">
            <label class="form-label">Pilih Sarana (20 Unit)</label>
            <select class="form-input" id="bookingSarana" onchange="system.checkSaranaRules(this.value)">
                <option value="">-- Pilih Sarana --</option>
                <optgroup label="üèõÔ∏è AULA UTAMA">
                    <option value="Aula SMP">Aula SMP (Sound System, Lighting, AC, Projector)</option>
                    <option value="Aula SMA">Aula SMA (Sound System, Projector, AC)</option>
                    <option value="Aula Serbaguna">Aula Serba Guna (Sound System)</option>
                    <option value="Saung Besar">Saung Besar (Sound System)</option>
                    <option value="Saung Kecil">Saung Kecil (Sound System)</option>
                </optgroup>
                <optgroup label="üíª LAB KOMPUTER">
                    <option value="Labkom SD">Lab Komputer SD (30 Unit)</option>
                    <option value="Labkom SMP">Lab Komputer SMP (40 Unit)</option>
                    <option value="Labkom SMA">Lab Komputer SMA (50 Unit)</option>
                </optgroup>
                <optgroup label="üåø OUTDOOR AREA">
                    <option value="Lapangan SMA">Lapangan SMA</option>
                    <option value="Lapangan Basket">Lapangan Basket</option>
                    <option value="Lapangan Volley">Lapangan Volley</option>
                    <option value="Lapangan Futsal">Lapangan Futsal</option>
                    <option value="Lapangan Rumput">Lapangan Rumput</option>
                    <option value="Lapangan Rumput Depan Masjid AF">Lapangan Rumput Depan Masjid AF
                    <option value="Area Parkir Loby SMA">Area Parkir Loby SMA</option>
                </optgroup>
                <optgroup label="üçΩÔ∏è KANTIN & RUANG MAKAN">
                    <option value="Kantin SMP">Kantin SMP</option>
                    <option value="Kantin SMA">Kantin SMA</option>
                </optgroup>
                <optgroup label="üìö PERPUSTAKAAN">
                    <option value="Perpus SD">Perpustakaan SD</option>
                    <option value="Perpus SMP">Perpustakaan SMP</option>
                    <option value="Perpus SMA">Perpustakaan SMA</option>
                </optgroup>
                <optgroup label="üïå RUANG IBADAH">
                    <option value="Masjid" disabled>Masjid (MAINTENANCE)</option>
                    <option value="Musholla SMA">Musholla SMA</option>
                </optgroup>
            </select>
        </div>

        <!-- PIC DETAILS -->
        <div class="form-group">
            <label class="form-label">Nama PIC / Guru *</label>
            <input type="text" class="form-input" id="bookingPIC" placeholder="Nama lengkap beserta gelar">
        </div>

        <div class="form-group">
            <label class="form-label">Unit / Jurusan *</label>
            <select class="form-input" id="bookingUnit">
                <option value="">-- Pilih Unit --</option>
                <option value="SD">SD Al Fikri</option>
                <option value="SMP">SMP Al Fikri</option>
                <option value="SMA">SMA Al Fikri</option>
                <option value="Umum">Umum</option>
            </select>
        </div>

        <!-- DATE & TIME -->
        <div class="form-group">
            <label class="form-label">Tanggal Booking *</label>
            <input type="date" class="form-input" id="bookingDate" onchange="system.checkDateRules()">
        </div>

        <div class="form-group">
            <label class="form-label">Waktu Booking *</label>
            <div class="time-grid">
                <input type="time" class="form-input" id="bookingStart" value="07:30" onchange="system.checkTimeRules()">
                <div class="time-separator">‚Üí</div>
                <input type="time" class="form-input" id="bookingEnd" value="16:00" onchange="system.checkTimeRules()">
            </div>
            <div style="color: #94a3b8; font-size: 0.8rem; margin-top: 8px;">
                ‚è∞ Jam operasional: Senin-Jumat 07:30 - 16:00 WIB
            </div>
        </div>

        <!-- DETAILS -->
        <div class="form-group">
            <label class="form-label">Keterangan Acara / Keperluan</label>
            <textarea class="form-input form-textarea" id="bookingNote" placeholder="Detail keperluan acara, jumlah peserta, peralatan khusus yang dibutuhkan..."></textarea>
        </div>

        <!-- FRIDAY WARNING -->
        <div id="fridayWarning" class="alert-box" style="display: none;">
            <div style="color: var(--red); font-weight: 800; font-size: 0.9rem; margin-bottom: 5px;">
                ‚ö†Ô∏è PERHATIAN: JUMAT 10:30 - 13:00 WIB
            </div>
            <div style="color: #fca5a5; font-size: 0.85rem;">
                Aula SMP, Aula SMA, dan Serba Guna tidak dapat dibooking untuk acara non-keagamaan pada jam shalat Jumat.
            </div>
        </div>

        <!-- SATURDAY INFO -->
        <div id="saturdayInfo" class="info-box" style="display: none;">
            <div style="color: var(--blue); font-weight: 800; font-size: 0.9rem; margin-bottom: 5px;">
                ‚ÑπÔ∏è BOOKING HARI SABTU
            </div>
            <div style="color: #93c5fd; font-size: 0.85rem;">
                Booking hari Sabtu memerlukan konfirmasi khusus via WhatsApp ke Pak Erwin (+62 888-6183-954).
            </div>
        </div>

        <!-- ACTION BUTTONS -->
        <button class="btn btn-primary" onclick="system.sendBooking()">
            <div>üì±</div>
            <div>KIRIM BOOKING KE PAK ERWIN</div>
        </button>

        <button class="btn btn-secondary" onclick="system.checkAvailability()">
            <div>üîç</div>
            <div>CEK KETERSEDIAAN</div>
        </button>

        <div class="alert-box">
            <div style="color: var(--red); font-weight: 800; font-size: 0.9rem; margin-bottom: 8px;">
                üìã KETENTUAN BOOKING
            </div>
            <div style="color: #fca5a5; font-size: 0.85rem; line-height: 1.5;">
                1. Durasi maksimal booking: 4 jam<br>
                2. Booking harus dilakukan minimal 1 hari sebelumnya<br>
                3. Pembatalan: maksimal 2 jam sebelum waktu booking<br>
                4. Kerusakan sarana menjadi tanggung jawab PIC<br>
                5. Wajib melapor setelah penggunaan
            </div>
        </div>
    </div>

    <!-- K3 VIEW -->
    <div id="k3View" class="view">
        <div class="view-header">
            <div class="view-title">LAPORAN K3</div>
            <button class="close-btn" onclick="system.showView('service')">√ó</button>
        </div>

        <div style="text-align: center; margin: 20px 0 30px;">
            <div style="font-size: 4rem; color: var(--red); margin-bottom: 10px;">‚ö†Ô∏è</div>
            <div style="color: var(--gold); font-weight: 800; font-size: 1.1rem;">
                LAPORAN KECELAKAN KERJA / POTENSI BAHAYA
            </div>
            <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 5px;">
                Dengan bukti foto wajib untuk dokumentasi
            </div>
        </div>

        <!-- K3 FORM -->
        <div class="form-group">
            <label class="form-label">Lokasi Kejadian *</label>
            <input type="text" class="form-input" id="k3Location" placeholder="Contoh: Labkom SMP lantai 2, Aula SMA, Area Parkir...">
        </div>

        <div class="form-group">
            <label class="form-label">Jenis Laporan *</label>
            <select class="form-input" id="k3Type">
                <option value="">-- Pilih Jenis Laporan --</option>
                <option value="Kecelakaan Kerja">Kecelakaan Kerja</option>
                <option value="Potensi Bahaya">Potensi Bahaya</option>
                <option value="Keamanan">Pelanggaran Keamanan</option>
                <option value="Kebersihan">Masalah Kebersihan</option>
                <option value="Fasilitas Rusak">Fasilitas Rusak</option>
                <option value="Kebakaran">Potensi Kebakaran</option>
                <option value="Listrik">Masalah Kelistrikan</option>
                <option value="Lainnya">Lainnya</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Nama Pelapor *</label>
            <input type="text" class="form-input" id="k3Reporter" placeholder="Nama lengkap pelapor">
        </div>

        <div class="form-group">
            <label class="form-label">Unit Pelapor *</label>
            <select class="form-input" id="k3Unit">
                <option value="">-- Pilih Unit --</option>
                <option value="Guru">Guru</option>
                <option value="Siswa">Siswa</option>
                <option value="Staf">Staf Administrasi</option>
                <option value="Kebersihan">Petugas Kebersihan</option>
                <option value="Sekuriti">Petugas Keamanan</option>
                <option value="Teknisi">Teknisi</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Deskripsi Lengkap *</label>
            <textarea class="form-input form-textarea" id="k3Description" placeholder="Jelaskan kejadian dengan detail:
‚Ä¢ Waktu kejadian
‚Ä¢ Kronologi
‚Ä¢ Dampak/kerusakan
‚Ä¢ Korban (jika ada)
‚Ä¢ Tindakan darurat yang sudah dilakukan"></textarea>
        </div>

        <!-- CAMERA SECTION -->
        <div class="camera-container">
            <video id="cameraPreview" class="camera-preview" autoplay playsinline></video>
            <div class="camera-controls">
                <button class="camera-btn" style="background: var(--green);" onclick="system.startCamera('k3')">
                    üì∏ BUKA KAMERA
                </button>
                <button class="camera-btn" style="background: var(--blue);" onclick="system.capturePhoto('k3')">
                    üì∑ AMBIL FOTO
                </button>
                <button class="camera-btn" style="background: var(--red);" onclick="system.stopCamera()">
                    ‚èπÔ∏è TUTUP KAMERA
                </button>
            </div>
        </div>

        <!-- PHOTO PREVIEW -->
        <div id="k3PhotoPreview" class="photo-preview" style="display: none;">
            <div style="color: var(--gold); font-weight: 800; font-size: 0.95rem; margin-bottom: 10px;">
                üì∏ BUKTI FOTO KEJADIAN
            </div>
            <img id="k3Photo" src="" style="width: 100%; border-radius: 10px; border: 2px solid var(--red);">
            <div style="color: #94a3b8; font-size: 0.8rem; margin-top: 10px; text-align: center;">
                Foto ini akan tersimpan di database sebagai bukti dokumentasi
            </div>
        </div>

        <!-- SEND BUTTON -->
        <button class="btn btn-danger" onclick="system.sendK3Report()">
            <div>üö®</div>
            <div>KIRIM LAPORAN K3 KE PAK ERWINSYAH</div>
        </button>

        <div class="alert-box">
            <div style="color: var(--red); font-weight: 800; font-size: 0.9rem; margin-bottom: 8px;">
                ‚ö†Ô∏è PROTOKOL LAPORAN K3
            </div>
            <div style="color: #fca5a5; font-size: 0.85rem; line-height: 1.5;">
                1. Laporkan segera setelah kejadian<br>
                2. Jangan memindahkan barang bukti<br>
                3. Beri tanda area berbahaya<br>
                4. Evakuasi korban (jika ada)<br>
                5. Foto bukti wajib untuk semua laporan
            </div>
        </div>
    </div>

    <!-- SECURITY DAILY REPORT VIEW -->
    <div id="securityView" class="view">
        <div class="view-header">
            <div class="view-title">LAPORAN HARIAN SEKURITI</div>
            <button class="close-btn" onclick="system.showView('service')">√ó</button>
        </div>

        <div style="text-align: center; margin: 20px 0 30px;">
            <div style="font-size: 4rem; margin-bottom: 10px;">üíÇ</div>
            <div style="color: var(--gold); font-weight: 800; font-size: 1.1rem;">
                SISTEM PATROLI & LAPORAN KEAMANAN
            </div>
            <div style="color: #94a3b8; font-size: 0.9rem; margin-top: 5px;">
                Check-in patroli setiap 2 jam dengan bukti foto
            </div>
        </div>

        <!-- SECURITY FORM -->
        <div class="form-group">
            <label class="form-label">Nama Petugas *</label>
            <select class="form-input" id="securityOfficer">
                <option value="">-- Pilih Petugas --</option>
                <option value="Pak Agus">Pak Agus (Shift Pagi)</option>
                <option value="Pak Dinda">Pak Dinda (Shift Siang)</option>
                <option value="Pak Mbeb">Pak Mbeb (Shift Malam)</option>
                <option value="Pak MahMud">Pak MahMud (Shift Pagi)</option>
                <option value="Pak Ayang">Pak Ayang (Shift Siang)</option>
                <option value="Pak Bawel">Pak Bawel (Shift Malam)</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Shift / Waktu Patroli *</label>
            <select class="form-input" id="securityShift">
                <option value="">-- Pilih Shift --</option>
                <option value="Pagi (07:00-19:00)">Pagi (07:00-19:00)</option>
                <option value="Malam (19:00-07:00)">Malam (19:00-07:00)</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Jenis Laporan *</label>
            <select class="form-input" id="securityReportType">
                <option value="">-- Pilih Jenis Laporan --</option>
                <option value="Check-in Patroli">Check-in Patroli (Rutin 2 jam)</option>
                <option value="Laporan Keamanan">Laporan Keamanan</option>
                <option value="Insiden Keamanan">Insiden Keamanan</option>
                <option value="Orang Asing">Orang Asing Terdeteksi</option>
                <option value="Kendaraan Mencurigakan">Kendaraan Mencurigakan</option>
                <option value="Check-out Patroli">Check-out Patroli</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Lokasi Patroli *</label>
            <select class="form-input" id="securityLocation">
                <option value="">-- Pilih Lokasi --</option>
                <option value="Pos Utama (Gerbang Depan)">Pos Utama (Gerbang Depan)</option>
                <option value="Area Belakang (Gerbang Belakang)">Area Belakang (Gerbang Belakang)</option>
                <option value="Area Belakang Gedung Belakang SD dan SMP">Area Belakang Gedung Belakang SD dan SMP</option>
                <option value="Area Gedung SD">Area Gedung SD</option>
                <option value="Area Gedung SMP">Area Gedung SMP</option>
                <option value="Area Gedung SMA">Area Gedung SMA</option>
                <option value="Area Olah Raga dan Taman">Area Olah Raga dan Taman</option>
                <option value="Seluruh Area">Patroli Seluruh Area</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Kondisi Keamanan *</label>
            <select class="form-input" id="securityCondition">
                <option value="">-- Pilih Kondisi --</option>
                <option value="Aman">Aman (Tidak Ada Masalah)</option>
                <option value="Waspada">Waspada (Ada Potensi)</option>
                <option value="Darurat">Darurat (Butuh Tindakan)</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">Deskripsi Kejadian / Catatan</label>
            <textarea class="form-input form-textarea" id="securityDescription" placeholder="Deskripsikan kondisi keamanan di lokasi:
‚Ä¢ Aktivitas yang terlihat
‚Ä¢ Orang/kendaraan mencurigakan
‚Ä¢ Kerusakan fasilitas
‚Ä¢ Pelanggaran peraturan
‚Ä¢ Tindakan yang sudah dilakukan"></textarea>
        </div>

        <!-- SECURITY CAMERA -->
        <div class="camera-container">
            <video id="securityCameraPreview" class="camera-preview" autoplay playsinline></video>
            <div class="camera-controls">
                <button class="camera-btn" style="background: var(--green);" onclick="system.startCamera('security')">
                    üì∏ BUKA KAMERA
                </button>
                <button class="camera-btn" style="background: var(--blue);" onclick="system.capturePhoto('security')">
                    üì∑ FOTO BUKTI
                </button>
                <button class="camera-btn" style="background: var(--red);" onclick="system.stopCamera()">
                    ‚èπÔ∏è TUTUP KAMERA
                </button>
            </div>
        </div>

        <!-- PHOTO PREVIEW -->
        <div id="securityPhotoPreview" class="photo-preview" style="display: none;">
            <div style="color: var(--gold); font-weight: 800; font-size: 0.95rem; margin-bottom: 10px;">
                üì∏ BUKTI PATROLI
            </div>
            <img id="securityPhoto" src="" style="width: 100%; border-radius: 10px; border: 2px solid var(--orange);">
            <div style="color: #94a3b8; font-size: 0.8rem; margin-top: 10px; text-align: center;">
                Foto patroli sebagai bukti kehadiran petugas
            </div>
        </div>

        <!-- SEND BUTTON -->
        <button class="btn btn-warning" onclick="system.sendSecurityReport()">
            <div>‚úÖ</div>
            <div>KIRIM LAPORAN SEKURITI</div>
        </button>

        <!-- PATROL SCHEDULE -->
        <div class="info-box">
            <div style="color: var(--blue); font-weight: 800; font-size: 0.9rem; margin-bottom: 8px;">
                üìã JADWAL PATROLI WAJIB
            </div>
            <div style="color: #94a3b8; font-size: 0.85rem; line-height: 1.5;">
                ‚Ä¢ Pagi: 06:00, 08:00, 10:00, 12:00, 14:00<br>
                ‚Ä¢ Siang: 14:00, 16:00, 18:00, 20:00, 22:00<br>
                ‚Ä¢ Malam: 22:00, 00:00, 02:00, 04:00, 06:00<br>
                ‚Ä¢ Wajib check-in setiap 2 jam dengan foto
            </div>
        </div>
    </div>

    <!-- ==================== ASSET VIEWS ==================== -->

    <!-- ASSET MAIN VIEW -->
    <div id="assetView" class="view">
        <div class="view-header">
            <div class="view-title">ASSET HUB</div>
            <button class="close-btn" onclick="system.showMain()">√ó</button>
        </div>

        <button class="btn btn-purple" onclick="system.showView('inventory')">
            <div>üì¶</div>
            <div>INVENTORY MANAGEMENT</div>
        </button>

        <button class="btn btn-warning" onclick="system.openVault('warehouse')">
            <div>üè¨</div>
            <div>WAREHOUSE MANAGEMENT</div>
        </button>

        <button class="btn btn-primary" onclick="system.showView('qrscanner')">
            <div>üì∑</div>
            <div>QR CODE SCANNER</div>
        </button>

        <button class="btn btn-secondary" onclick="system.openVault('inventory')">
            <div>üîì</div>
            <div>INVENTORY VAULT ACCESS</div>
        </button>

        <button class="btn btn-dark" onclick="system.showView('smartprint')">
            <div>üñ®Ô∏è</div>
            <div>SMART PRINT SYSTEM</div>
        </button>

        <!-- ISO STANDARD INFO -->
        <div class="info-box" style="margin-top: 20px;">
            <div style="color: var(--blue); font-weight: 800; font-size: 0.95rem; margin-bottom: 8px;">
                üìä INVENTORY SYSTEM (ISO STANDARD)
            </div>
            <div style="color: #94a3b8; font-size: 0.85rem; line-height: 1.5;">
                ‚Ä¢ Sistem inventaris mengikuti standar ISO 9001:2015<br>
                ‚Ä¢ Kode barang: INV-XXX-YYY-ZZZ<br>
                ‚Ä¢ QR Code untuk setiap item<br>
                ‚Ä¢ Audit trail lengkap<br>
                ‚Ä¢ Real-time stock monitoring
            </div>
        </div>

        <!-- INVENTORY SUMMARY -->
        <div style="margin-top: 20px; padding: 15px; background: rgba(139, 92, 246, 0.1); border-radius: 12px;">
            <div style="color: var(--purple); font-weight: 800; font-size: 0.95rem; margin-bottom: 10px;">
                üìà INVENTORY OVERVIEW
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                <div style="text-align: center;">
                    <div style="color: white; font-weight: 800; font-size: 1.2rem;">12</div>
                    <div style="color: #94a3b8; font-size: 0.75rem;">Kategori</div>
                </div>
                <div style="text-align: center;">
                    <div style="color: white; font-weight: 800; font-size: 1.2rem;">85</div>
                    <div style="color: #94a3b8; font-size: 0.75rem;">Total Items</div>
                </div>
                <div style="text-align: center;">
                    <div style="color: white; font-weight: 800; font-size: 1.2rem;">3</div>
                    <div style="color: #94a3b8; font-size: 0.75rem;">Gudang</div>
                </div>
            </div>
        </div>
    </div>

    <!-- INVENTORY MANAGEMENT VIEW -->
    <div id="inventoryView" class="view">
        <div class="view-header">
            <div class="view-title">INVENTORY MANAGEMENT</div>
            <button class="close-btn" onclick="system.showView('asset')">√ó</button>
        </div>

        <!-- INVENTORY CATEGORIES -->
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px;">
            <button class="btn btn-dark" onclick="system.showInventoryCategory('audio')">
                üîä Audio
            </button>
            <button class="btn btn-dark" onclick="system.showInventoryCategory('visual')">
                üì∫ Visual
            </button>
            <button class="btn btn-dark" onclick="system.showInventoryCategory('furniture')">
                ü™ë Furniture
            </button>
            <button class="btn btn-dark" onclick="system.showInventoryCategory('cable')">
                üîå Cable
            </button>
            <button class="btn btn-dark" onclick="system.showInventoryCategory('computer')">
                üíª Computer
            </button>
            <button class="btn btn-dark" onclick="system.showInventoryCategory('other')">
                üì¶ Other
            </button>
        </div>

        <!-- INVENTORY LIST -->
        <div id="inventoryList">
            <!-- Items will be loaded here -->
        </div>

        <!-- INVENTORY ACTIONS -->
        <button class="btn btn-primary" onclick="system.addNewItem()">
            <div>‚ûï</div>
            <div>TAMBAH ITEM BARU</div>
        </button>

        <button class="btn btn-secondary" onclick="system.generateReport()">
            <div>üìä</div>
            <div>GENERATE REPORT</div>
        </button>
    </div>

    <!-- ==================== MODALS ==================== -->

    <!-- LOGIN MODAL - NO GUEST MODE -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div style="text-align: center; margin-bottom: 25px;">
                <div style="font-size: 3.5rem; color: var(--gold); margin-bottom: 15px;">üîê</div>
                <div style="color: var(--gold); font-weight: 800; font-size: 1.4rem; margin-bottom: 5px;">
                    SYSTEM ACCESS
                </div>
                <div style="color: #94a3b8; font-size: 0.9rem;">
                    Masukkan password untuk mengakses sistem
                </div>
            </div>

            <div class="form-group">
                <input type="password" class="form-input" id="loginPassword" placeholder="Enter password" autocomplete="off" style="text-align: center; letter-spacing: 2px;">
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0;">
                <button class="btn btn-dark" onclick="system.fillPassword('user_@1234')">
                    <div>üë§</div>
                    <div>USER</div>
                </button>
                <button class="btn btn-dark" onclick="system.fillPassword('@dm1n_Sec2025')">
                    <div>üëë</div>
                    <div>ADMIN</div>
                </button>
            </div>

            <button class="btn btn-gold" onclick="system.login()" style="margin-bottom: 12px;">
                <div>üîì</div>
                <div>ACCESS SYSTEM</div>
            </button>

            <div style="color: #64748b; font-size: 0.75rem; text-align: center; margin-top: 15px;">
                No guest mode available<br>
                Contact admin for access
            </div>
        </div>
    </div>

    <!-- VAULT MODAL -->
    <div id="vaultModal" class="modal">
        <div class="modal-content">
            <div style="text-align: center; margin-bottom: 25px;">
                <div style="font-size: 3.5rem; color: var(--gold); margin-bottom: 15px;">üóùÔ∏è</div>
                <div id="vaultTitle" style="color: var(--gold); font-weight: 800; font-size: 1.3rem; margin-bottom: 5px;">
                    VAULT ACCESS
                </div>
                <div id="vaultSubtitle" style="color: #94a3b8; font-size: 0.9rem;">
                    Enter vault password to continue
                </div>
            </div>

            <div class="form-group">
                <input type="password" class="form-input" id="vaultPassword" placeholder="Vault password" autocomplete="off" style="text-align: center; letter-spacing: 2px;">
            </div>

            <button class="btn btn-gold" onclick="system.accessVault()" style="margin-bottom: 12px;">
                <div>üîì</div>
                <div>UNLOCK VAULT</div>
            </button>

            <button class="btn btn-dark" onclick="system.closeModal('vaultModal')">
                CANCEL
            </button>
        </div>
    </div>

    <!-- ==================== BOTTOM NAVIGATION ==================== -->
    <div class="bottom-nav">
        <button class="nav-btn active" onclick="system.showMain()">
            <div class="nav-icon">üè†</div>
            <div>Home</div>
        </button>
        <button class="nav-btn" onclick="system.showView('service')">
            <div class="nav-icon">üèõÔ∏è</div>
            <div>Service</div>
        </button>
        <button class="nav-btn" onclick="system.showView('asset')">
            <div class="nav-icon">üì¶</div>
            <div>Asset</div>
        </button>
        <button class="nav-btn" onclick="system.showView('admin')">
            <div class="nav-icon">üõ∞Ô∏è</div>
            <div>Admin</div>
        </button>
        <button class="nav-btn" onclick="system.showModal('loginModal')">
            <div class="nav-icon">üîê</div>
            <div>Login</div>
        </button>
    </div>

    <!-- STATUS BAR -->
    <div class="status-bar">
        <div id="clock" style="color: white;">üïê 00:00:00</div>
        <div id="systemUser" style="color: var(--gold);">üë§ GUEST</div>
        <div id="systemStatus" style="color: var(--green);">üü¢ OFFLINE</div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast"></div>

    <script>
        // =========================================
        // DREAM OS ULTIMATE v13.0 - COMPLETE SYSTEM
        // =========================================
        console.log(`
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë     DREAM OS ULTIMATE v13.0 - COMPLETE    ‚ïë
‚ïë    NO GUEST MODE ‚Ä¢ 20 SARANA ‚Ä¢ ISO STD    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        `);

        const system = {
            // SYSTEM STATE
            currentView: 'main',
            userRole: null,
            vaultType: null,
            cameraStream: null,
            currentPhoto: null,
            isFridayLocked: false,
            retryCount: 0,
            maxRetries: 3,

            // PASSWORD MANAGEMENT (HIDDEN)
            passwords: {
                user: 'user_@1234',
                admin: '@dm1n_Sec2025',
                architect: '418626',
                inventory_vault: '4dm1n_6969@01',
                warehouse_vault: '4dm1n_9696@02',
                master: 'Mr.M.Architect_1001'
            },

            // 20 SARANA DATA
            saranaData: [
                { id: 1, name: 'Aula SMP', capacity: 200, equipment: ['Sound', 'Lighting', 'AC', 'Projector'], category: 'Aula', fridayLock: true },
                { id: 2, name: 'Aula SMA', capacity: 150, equipment: ['Sound', 'Projector', 'AC'], category: 'Aula', fridayLock: true },
                { id: 3, name: 'Aula Serbaguna', capacity: 100, equipment: ['Sound'], category: 'Aula', fridayLock: true },
                { id: 4, name: 'Aula Besar', capacity: 300, equipment: ['Full Equipment'], category: 'Aula', fridayLock: true },
                { id: 5, name: 'Labkom SD', capacity: 30, equipment: ['Komputer', 'Projector'], category: 'Lab' },
                { id: 6, name: 'Labkom SMP', capacity: 40, equipment: ['Komputer', 'Projector', 'AC'], category: 'Lab' },
                { id: 7, name: 'Labkom SMA', capacity: 50, equipment: ['Komputer', 'Projector', 'AC'], category: 'Lab' },
                { id: 8, name: 'Lab Multimedia', capacity: 20, equipment: ['Editing Suite'], category: 'Lab' },
                { id: 9, name: 'Lapangan Basket', capacity: 50, equipment: [], category: 'Outdoor' },
                { id: 10, name: 'Lapangan Volley', capacity: 30, equipment: [], category: 'Outdoor' },
                { id: 11, name: 'Lapangan Futsal', capacity: 40, equipment: [], category: 'Outdoor' },
                { id: 12, name: 'Lapangan Upacara', capacity: 500, equipment: ['Sound'], category: 'Outdoor' },
                { id: 13, name: 'Area Parkir', capacity: 100, equipment: [], category: 'Outdoor' },
                { id: 14, name: 'Kantin SMP', capacity: 80, equipment: [], category: 'Kantin' },
                { id: 15, name: 'Kantin SMA', capacity: 100, equipment: [], category: 'Kantin' },
                { id: 16, name: 'Ruang Makan Guru', capacity: 50, equipment: [], category: 'Kantin' },
                { id: 17, name: 'Perpus SD', capacity: 40, equipment: [], category: 'Perpustakaan' },
                { id: 18, name: 'Perpus SMP', capacity: 60, equipment: [], category: 'Perpustakaan' },
                { id: 19, name: 'Perpus SMA', capacity: 80, equipment: [], category: 'Perpustakaan' },
                { id: 20, name: 'Musholla Guru', capacity: 30, equipment: [], category: 'Ibadah' },
                { id: 21, name: 'Musholla Siswa', capacity: 100, equipment: [], category: 'Ibadah' },
                { id: 22, name: 'Masjid', capacity: 200, equipment: ['Sound'], status: 'MAINTENANCE', category: 'Ibadah' }
            ],

            // INVENTORY DATA (ISO STANDARD)
            inventoryData: [
                { id: 'INV-AUD-001', name: 'Sound Portable', category: 'Audio', quantity: 4, location: 'Gudang A', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-AUD-002', name: 'Mic Standing', category: 'Audio', quantity: 8, location: 'Gudang A', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-AUD-003', name: 'Mic Wireless', category: 'Audio', quantity: 6, location: 'Gudang A', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-VIS-001', name: 'Projector Epson', category: 'Visual', quantity: 10, location: 'Gudang B', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-VIS-002', name: 'Screen Projector', category: 'Visual', quantity: 8, location: 'Gudang B', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-VIS-003', name: 'TV 55"', category: 'Visual', quantity: 4, location: 'Gudang B', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-FUR-001', name: 'Meja Panjang', category: 'Furniture', quantity: 15, location: 'Warehouse', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-FUR-002', name: 'Meja Siswa', category: 'Furniture', quantity: 200, location: 'Warehouse', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-FUR-003', name: 'Kursi Futura', category: 'Furniture', quantity: 100, location: 'Warehouse', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-FUR-004', name: 'Kursi Chitose', category: 'Furniture', quantity: 80, location: 'Warehouse', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-CAB-001', name: 'Kabel HDMI 10m', category: 'Cable', quantity: 25, location: 'Gudang C', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-CAB-002', name: 'Kabel VGA 15m', category: 'Cable', quantity: 20, location: 'Gudang C', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-CAB-003', name: 'Kabel Rol AC', category: 'Cable', quantity: 15, location: 'Gudang C', status: 'Ready', lastAudit: '2024-01-05' },
                { id: 'INV-COM-001', name: 'PC Desktop', category: 'Computer', quantity: 120, location: 'Labkom', status: 'In Use', lastAudit: '2024-01-05' },
                { id: 'INV-COM-002', name: 'Laptop Admin', category: 'Computer', quantity: 8, location: 'Admin', status: 'In Use', lastAudit: '2024-01-05' }
            ],

            // ========== INITIALIZATION ==========
            init: function() {
                console.log('üöÄ Initializing DREAM OS v13.0...');
                
                // Quick load
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                    
                    // Start clock
                    this.updateClock();
                    setInterval(() => this.updateClock(), 1000);
                    
                    // Auto show login modal (NO GUEST MODE)
                    setTimeout(() => {
                        this.showModal('loginModal');
                    }, 300);
                    
                    // Set default date for booking
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    document.getElementById('bookingDate').value = tomorrow.toISOString().split('T')[0];
                    
                    console.log('‚úÖ System initialized - Login required');
                    this.showToast('üîê Sistem memerlukan login');
                }, 800);
            },

            // ========== LOGIN SYSTEM (NO GUEST MODE) ==========
            login: function() {
                const password = document.getElementById('loginPassword').value;
                
                // Check for Architect bypass
                if (password === this.passwords.architect) {
                    this.userRole = 'architect';
                    document.getElementById('systemUser').textContent = 'üèóÔ∏è ARCHITECT';
                    document.getElementById('systemUser').style.color = 'var(--purple)';
                    document.getElementById('systemStatus').textContent = 'üü¢ ONLINE';
                    document.getElementById('adminCard').style.display = 'block';
                    
                    this.closeModal('loginModal');
                    this.showToast('üèóÔ∏è Architect mode activated - Full access');
                    return;
                }
                
                // Regular password check
                if (password === this.passwords.user) {
                    this.userRole = 'user';
                    document.getElementById('systemUser').textContent = 'üë§ USER';
                    document.getElementById('systemUser').style.color = 'var(--gold)';
                    document.getElementById('systemStatus').textContent = 'üü¢ ONLINE';
                    
                    this.closeModal('loginModal');
                    this.showToast('üë§ User access granted');
                    
                } else if (password === this.passwords.admin) {
                    this.userRole = 'admin';
                    document.getElementById('systemUser').textContent = 'üëë ADMIN';
                    document.getElementById('systemUser').style.color = 'var(--gold)';
                    document.getElementById('systemStatus').textContent = 'üü¢ ONLINE';
                    document.getElementById('adminCard').style.display = 'block';
                    
                    this.closeModal('loginModal');
                    this.showToast('üëë Admin access granted');
                    
                } else if (password === this.passwords.master) {
                    this.userRole = 'master';
                    document.getElementById('systemUser').textContent = 'üîì MASTER';
                    document.getElementById('systemUser').style.color = 'var(--red)';
                    document.getElementById('systemStatus').textContent = 'üü¢ ONLINE';
                    document.getElementById('adminCard').style.display = 'block';
                    
                    this.closeModal('loginModal');
                    this.showToast('üîì Master access granted');
                    
                } else {
                    this.showToast('‚ùå Password salah!', true);
                    if (navigator.vibrate) navigator.vibrate(200);
                }
            },

            fillPassword: function(password) {
                document.getElementById('loginPassword').value = password;
            },

            // ========== VIEW MANAGEMENT ==========
            showView: function(viewId) {
                // Stop camera if active
                this.stopCamera();
                
                // Update navigation
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                
                // Hide all views
                document.querySelectorAll('.view').forEach(v => v.style.display = 'none');
                document.getElementById('mainView').style.display = 'none';
                
                // Show target view
                if (viewId === 'main') {
                    document.getElementById('mainView').style.display = 'block';
                    document.querySelector('.nav-btn:nth-child(1)').classList.add('active');
                } else {
                    const view = document.getElementById(viewId + 'View');
                    if (view) {
                        view.style.display = 'block';
                        // Update active nav button
                        const navIndex = {service: 2, asset: 3, admin: 4}[viewId];
                        if (navIndex) {
                            document.querySelector(`.nav-btn:nth-child(${navIndex})`).classList.add('active');
                        }
                    }
                }
                
                this.currentView = viewId;
            },

            showMain: function() {
                this.showView('main');
            },

            // ========== MODAL MANAGEMENT ==========
            showModal: function(modalId) {
                document.getElementById(modalId).style.display = 'flex';
            },

            closeModal: function(modalId) {
                document.getElementById(modalId).style.display = 'none';
            },

            // ========== BOOKING SYSTEM ==========
            checkDateRules: function() {
                const dateInput = document.getElementById('bookingDate').value;
                if (!dateInput) return;
                
                const selectedDate = new Date(dateInput);
                const day = selectedDate.getDay();
                
                // Hide all warnings first
                document.getElementById('fridayWarning').style.display = 'none';
                document.getElementById('saturdayInfo').style.display = 'none';
                this.isFridayLocked = false;
                
                // Check if Sunday
                if (day === 0) {
                    this.showToast('‚ùå Minggu: Tidak ada booking', true);
                    document.getElementById('bookingDate').value = '';
                    return;
                }
                
                // Check if Saturday
                if (day === 6) {
                    document.getElementById('saturdayInfo').style.display = 'block';
                    this.showToast('Sabtu: Konfirmasi WA ke Pak Erwin');
                }
            },

            checkTimeRules: function() {
                const startTime = document.getElementById('bookingStart').value;
                const endTime = document.getElementById('bookingEnd').value;
                const dateInput = document.getElementById('bookingDate').value;
                
                if (!startTime || !endTime || !dateInput) return;
                
                const selectedDate = new Date(dateInput);
                const day = selectedDate.getDay();
                
                // Reset warnings
                document.getElementById('fridayWarning').style.display = 'none';
                this.isFridayLocked = false;
                
                // Check if Friday and time is 10:30-13:00
                if (day === 5) { // Friday
                    const [startHour, startMinute] = startTime.split(':').map(Number);
                    const startDecimal = startHour + (startMinute / 100);
                    
                    if (startDecimal >= 10.5 && startDecimal < 13) {
                        const sarana = document.getElementById('bookingSarana').value;
                        const fridayLockSarana = ['Aula SMP', 'Aula SMA', 'Aula Serbaguna', 'Aula Besar'];
                        
                        if (fridayLockSarana.includes(sarana)) {
                            document.getElementById('fridayWarning').style.display = 'block';
                            this.isFridayLocked = true;
                            this.showToast('‚ùå Jumat 10:30-13:00: Aula tidak tersedia', true);
                        }
                    }
                }
                
                // Check duration (max 4 hours)
                const [startHour, startMinute] = startTime.split(':').map(Number);
                const [endHour, endMinute] = endTime.split(':').map(Number);
                
                const startTotal = startHour * 60 + startMinute;
                const endTotal = endHour * 60 + endMinute;
                const duration = endTotal - startTotal;
                
                if (duration > 240) { // 4 hours = 240 minutes
                    this.showToast('Durasi maksimal 4 jam!', true);
                    document.getElementById('bookingEnd').value = this.addMinutes(startTime, 240);
                }
            },

            checkSaranaRules: function(sarana) {
                if (sarana === 'Masjid') {
                    this.showToast('Masjid dalam maintenance sampaiÂè¶Ë°åÈÄöÁü•', true);
                    document.getElementById('bookingSarana').value = '';
                }
            },

            sendBooking: function() {
                // Check if user is logged in
                if (!this.userRole) {
                    this.showToast('‚ùå Silakan login terlebih dahulu!', true);
                    this.showModal('loginModal');
                    return;
                }
                
                const sarana = document.getElementById('bookingSarana').value;
                const pic = document.getElementById('bookingPIC').value;
                const unit = document.getElementById('bookingUnit').value;
                const date = document.getElementById('bookingDate').value;
                const startTime = document.getElementById('bookingStart').value;
                const endTime = document.getElementById('bookingEnd').value;
                const note = document.getElementById('bookingNote').value;
                
                if (!sarana || !pic || !unit || !date || !startTime || !endTime) {
                    this.showToast('‚ùå Isi semua data wajib!', true);
                    return;
                }
                
                // Check Friday lock
                if (this.isFridayLocked) {
                    this.showToast('‚ùå Tidak bisa booking jam ini di hari Jumat!', true);
                    return;
                }
                
                // Check if Saturday
                const selectedDate = new Date(date);
                const day = selectedDate.getDay();
                
                let waMessage = '';
                let phoneNumber = '628886183954'; // Pak Erwin
                
                if (day === 6) { // Saturday
                    waMessage = `*BOOKING SARANA SABTU - KONFIRMASI*\n\n` +
                               `üìã *JENIS:* Booking Hari Sabtu\n` +
                               `üèõÔ∏è *SARANA:* ${sarana}\n` +
                               `üë§ *PIC:* ${pic}\n` +
                               `üë• *UNIT:* ${unit}\n` +
                               `üìÖ *TANGGAL:* ${date}\n` +
                               `‚è∞ *WAKTU:* ${startTime} - ${endTime} WIB\n` +
                               `üìù *KETERANGAN:* ${note || '-'}\n\n` +
                               `*MOHON KONFIRMASI VIA WA INI YA PAK ERWIN*\n` +
                               `Status: MENUNGGU KONFIRMASI KHUSUS\n` +
                               `Via: Dream OS Ultimate v13.0`;
                } else {
                    waMessage = `*BOOKING SARANA SIF - DREAM OS*\n\n` +
                               `üìã *JENIS:* Booking Sarana\n` +
                               `üèõÔ∏è *SARANA:* ${sarana}\n` +
                               `üë§ *PIC:* ${pic}\n` +
                               `üë• *UNIT:* ${unit}\n` +
                               `üìÖ *TANGGAL:* ${date}\n` +
                               `‚è∞ *WAKTU:* ${startTime} - ${endTime} WIB\n` +
                               `üìù *KETERANGAN:* ${note || '-'}\n\n` +
                               `Status: *MENUNGGU KONFIRMASI*\n` +
                               `Via: Dream OS Ultimate v13.0\n` +
                               `User: ${this.userRole.toUpperCase()}`;
                }
                
                // Save to localStorage
                const bookingData = {
                    id: Date.now(),
                    sarana, pic, unit, date, startTime, endTime, note,
                    user: this.userRole,
                    timestamp: new Date().toISOString(),
                    status: 'pending'
                };
                
                this.saveToLocalStorage('bookings', bookingData);
                
                // Send to WhatsApp
                window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(waMessage)}`, '_blank');
                
                this.showToast('‚úÖ Booking berhasil dikirim ke Pak Erwin!');
                
                // Haptic feedback
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                
                setTimeout(() => this.showView('service'), 1500);
            },

            checkAvailability: function() {
                const sarana = document.getElementById('bookingSarana').value;
                if (!sarana) {
                    this.showToast('Pilih sarana dulu!', true);
                    return;
                }
                
                const available = Math.random() > 0.3;
                this.showToast(available ? 
                    `‚úÖ ${sarana} tersedia untuk booking` : 
                    `‚ùå ${sarana} sudah dibooking`, 
                    !available
                );
            },

            // ========== K3 REPORT SYSTEM ==========
            sendK3Report: function() {
                // Check login
                if (!this.userRole) {
                    this.showToast('‚ùå Silakan login terlebih dahulu!', true);
                    this.showModal('loginModal');
                    return;
                }
                
                const location = document.getElementById('k3Location').value;
                const type = document.getElementById('k3Type').value;
                const reporter = document.getElementById('k3Reporter').value;
                const unit = document.getElementById('k3Unit').value;
                const description = document.getElementById('k3Description').value;
                
                if (!location || !type || !reporter || !unit || !description) {
                    this.showToast('‚ùå Isi semua data laporan!', true);
                    return;
                }
                
                // Save K3 report
                const k3Data = {
                    id: Date.now(),
                    location, type, reporter, unit, description,
                    photo: this.currentPhoto ? 'yes' : 'no',
                    user: this.userRole,
                    timestamp: new Date().toISOString(),
                    status: 'reported'
                };
                
                this.saveToLocalStorage('k3_reports', k3Data);
                
                // Prepare email for teknisi
                const emailBody = `Subject: LAPORAN K3 - ${location}\n\n` +
                                 `LOKASI: ${location}\n` +
                                 `JENIS: ${type}\n` +
                                 `PELAPOR: ${reporter}\n` +
                                 `UNIT: ${unit}\n` +
                                 `DESKRIPSI:\n${description}\n\n` +
                                 `BUKTI FOTO: ${this.currentPhoto ? 'Tersimpan di database' : 'Tidak ada'}\n` +
                                 `DILAPORKAN OLEH: ${this.userRole.toUpperCase()}\n` +
                                 `WAKTU: ${new Date().toLocaleString()}\n` +
                                 `VIA: Dream OS Ultimate v13.0`;
                
                // Send email to teknisi
                window.open(`mailto:teknisi@alfikri.sch.id?subject=Laporan K3&body=${encodeURIComponent(emailBody)}`, '_blank');
                
                // Also send WhatsApp to Pak Erwin
                const waMessage = `*LAPORAN K3 - DREAM OS*\n\n` +
                                 `üìç *LOKASI:* ${location}\n` +
                                 `‚ö†Ô∏è *JENIS:* ${type}\n` +
                                 `üë§ *PELAPOR:* ${reporter}\n` +
                                 `üë• *UNIT:* ${unit}\n` +
                                 `üìù *DESKRIPSI:* ${description.substring(0, 100)}...\n\n` +
                                 `Status: *DILAPORKAN*\n` +
                                 `Foto: ${this.currentPhoto ? '‚úÖ Ada' : '‚ùå Tidak ada'}\n` +
                                 `Via: Dream OS v13.0`;
                
                window.open(`https://wa.me/628886183954?text=${encodeURIComponent(waMessage)}`, '_blank');
                
                this.showToast('‚úÖ Laporan K3 dikirim ke teknisi & Pak Erwin!');
                this.currentPhoto = null;
                document.getElementById('k3PhotoPreview').style.display = 'none';
                
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                
                setTimeout(() => this.showView('service'), 1500);
            },

            // ========== SECURITY REPORT SYSTEM ==========
            sendSecurityReport: function() {
                // Check login
                if (!this.userRole) {
                    this.showToast('‚ùå Silakan login terlebih dahulu!', true);
                    this.showModal('loginModal');
                    return;
                }
                
                const officer = document.getElementById('securityOfficer').value;
                const shift = document.getElementById('securityShift').value;
                const type = document.getElementById('securityReportType').value;
                const location = document.getElementById('securityLocation').value;
                const condition = document.getElementById('securityCondition').value;
                const description = document.getElementById('securityDescription').value;
                
                if (!officer || !shift || !type || !location || !condition) {
                    this.showToast('‚ùå Isi semua data laporan!', true);
                    return;
                }
                
                // Save security report
                const securityData = {
                    id: Date.now(),
                    officer, shift, type, location, condition, description,
                    photo: this.currentPhoto ? 'yes' : 'no',
                    user: this.userRole,
                    timestamp: new Date().toISOString(),
                    status: 'reported'
                };
                
                this.saveToLocalStorage('security_reports', securityData);
                
                // Send to Pak Erwin via WhatsApp
                const waMessage = `*LAPORAN SEKURITI - DREAM OS*\n\n` +
                                 `üíÇ *PETUGAS:* ${officer}\n` +
                                 `‚è∞ *SHIFT:* ${shift}\n` +
                                 `üìã *JENIS:* ${type}\n` +
                                 `üìç *LOKASI:* ${location}\n` +
                                 `üü° *KONDISI:* ${condition}\n` +
                                 `üìù *CATATAN:* ${description || '-'}\n\n` +
                                 `Foto: ${this.currentPhoto ? '‚úÖ Ada' : '‚ùå Tidak ada'}\n` +
                                 `Status: *DILAPORKAN*\n` +
                                 `Via: Dream OS v13.0`;
                
                window.open(`https://wa.me/628886183954?text=${encodeURIComponent(waMessage)}`, '_blank');
                
                this.showToast('‚úÖ Laporan sekuriti dikirim ke Pak Erwin!');
                this.currentPhoto = null;
                document.getElementById('securityPhotoPreview').style.display = 'none';
                
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                
                setTimeout(() => this.showView('service'), 1500);
            },

            // ========== CAMERA SYSTEM ==========
            startCamera: function(type) {
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    this.showToast('‚ùå Kamera tidak didukung', true);
                    return;
                }
                
                // Stop previous stream
                this.stopCamera();
                
                const previewId = type === 'security' ? 'securityCameraPreview' : 'cameraPreview';
                const preview = document.getElementById(previewId);
                
                const constraints = {
                    video: {
                        facingMode: 'environment',
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                navigator.mediaDevices.getUserMedia(constraints)
                    .then(stream => {
                        this.cameraStream = stream;
                        preview.srcObject = stream;
                        this.showToast('üì∑ Kamera aktif');
                    })
                    .catch(err => {
                        console.error('Camera error:', err);
                        this.showToast('‚ùå Gagal mengakses kamera', true);
                    });
            },

            capturePhoto: function(type) {
                if (!this.cameraStream) {
                    this.showToast('‚ùå Buka kamera terlebih dahulu!', true);
                    return;
                }
                
                const previewId = type === 'security' ? 'securityCameraPreview' : 'cameraPreview';
                const preview = document.getElementById(previewId);
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = preview.videoWidth;
                canvas.height = preview.videoHeight;
                ctx.drawImage(preview, 0, 0, canvas.width, canvas.height);
                
                // Add watermark
                ctx.font = "20px Arial";
                ctx.fillStyle = "#fbbf24";
                ctx.fillText("DREAM OS v13.0", 20, canvas.height - 40);
                ctx.fillText(new Date().toLocaleString(), 20, canvas.height - 15);
                
                this.currentPhoto = canvas.toDataURL('image/jpeg', 0.9);
                
                // Show preview
                if (type === 'security') {
                    document.getElementById('securityPhoto').src = this.currentPhoto;
                    document.getElementById('securityPhotoPreview').style.display = 'block';
                } else {
                    document.getElementById('k3Photo').src = this.currentPhoto;
                    document.getElementById('k3PhotoPreview').style.display = 'block';
                }
                
                this.showToast('‚úÖ Foto berhasil diambil!');
                this.stopCamera();
                
                // Haptic feedback
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
            },

            stopCamera: function() {
                if (this.cameraStream) {
                    this.cameraStream.getTracks().forEach(track => track.stop());
                    this.cameraStream = null;
                }
            },

            // ========== INVENTORY SYSTEM ==========
            openVault: function(type) {
                this.vaultType = type;
                const modal = document.getElementById('vaultModal');
                const title = document.getElementById('vaultTitle');
                const subtitle = document.getElementById('vaultSubtitle');
                
                if (type === 'inventory') {
                    title.textContent = 'INVENTORY VAULT';
                    subtitle.textContent = 'Enter inventory vault password';
                } else {
                    title.textContent = 'WAREHOUSE VAULT';
                    subtitle.textContent = 'Enter warehouse vault password';
                }
                
                modal.style.display = 'flex';
                document.getElementById('vaultPassword').value = '';
                document.getElementById('vaultPassword').focus();
            },

            accessVault: function() {
                const password = document.getElementById('vaultPassword').value;
                const expectedPassword = this.vaultType === 'inventory' 
                    ? this.passwords.inventory_vault 
                    : this.passwords.warehouse_vault;
                
                if (password === expectedPassword || 
                    password === this.passwords.architect || 
                    password === this.passwords.master) {
                    
                    this.closeModal('vaultModal');
                    
                    if (this.vaultType === 'inventory') {
                        this.showView('inventory');
                        this.showToast('üîì Inventory vault unlocked');
                    } else {
                        this.showView('warehouse');
                        this.showToast('üîì Warehouse vault unlocked');
                    }
                    
                    // Haptic feedback
                    if (navigator.vibrate) navigator.vibrate([50, 50, 50]);
                } else {
                    this.showToast('‚ùå Password salah!', true);
                    if (navigator.vibrate) navigator.vibrate(200);
                }
            },

            showInventoryCategory: function(category) {
                const items = this.inventoryData.filter(item => item.category.toLowerCase() === category);
                const container = document.getElementById('inventoryList');
                container.innerHTML = '';
                
                items.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'inventory-card';
                    card.innerHTML = `
                        <div class="item-name">${item.name}</div>
                        <div class="item-details">
                            <div>ID: ${item.id}</div>
                            <div>Qty: ${item.quantity}</div>
                        </div>
                        <div class="item-details">
                            <div>${item.location}</div>
                            <div style="color: ${item.status === 'Ready' ? 'var(--green)' : 'var(--orange)'}">
                                ${item.status}
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            },

            // ========== UTILITIES ==========
            addMinutes: function(time, minutes) {
                const [hours, mins] = time.split(':').map(Number);
                const totalMinutes = hours * 60 + mins + minutes;
                const newHours = Math.floor(totalMinutes / 60);
                const newMinutes = totalMinutes % 60;
                return `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}`;
            },

            saveToLocalStorage: function(key, data) {
                let items = JSON.parse(localStorage.getItem(`sif_${key}`) || '[]');
                items.unshift(data);
                localStorage.setItem(`sif_${key}`, JSON.stringify(items.slice(0, 100)));
            },

            showToast: function(message, isError = false) {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = isError ? 'toast toast-error' : 'toast';
                toast.style.display = 'block';
                
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 3000);
                
                console.log('üì¢ Toast:', message);
            },

            updateClock: function() {
                const now = new Date();
                const time = now.toLocaleTimeString('id-ID');
                document.getElementById('clock').textContent = 'üïê ' + time;
            },

            // ========== DEMO FUNCTION ==========
            quickDemo: function() {
                if (!this.userRole) {
                    this.showToast('‚ùå Silakan login dulu untuk demo', true);
                    this.showModal('loginModal');
                    return;
                }
                
                this.showToast('üé¨ Memulai demo sistem...');
                
                const steps = [
                    { delay: 0, action: () => this.showView('service') },
                    { delay: 1000, action: () => this.showView('booking') },
                    { delay: 2000, action: () => {
                        document.getElementById('bookingSarana').value = 'Aula SMP';
                        document.getElementById('bookingPIC').value = 'Guru Demo';
                        document.getElementById('bookingUnit').value = 'SMP';
                        const tomorrow = new Date();
                        tomorrow.setDate(tomorrow.getDate() + 1);
                        document.getElementById('bookingDate').value = tomorrow.toISOString().split('T')[0];
                        this.showToast('üìÖ Demo: Coba booking Jumat 11:00');
                    }},
                    { delay: 4000, action: () => {
                        this.showToast('‚ùå Aula SMP locked di Jumat 10:30-13:00');
                    }},
                    { delay: 6000, action: () => {
                        document.getElementById('bookingStart').value = '13:30';
                        document.getElementById('bookingEnd').value = '15:30';
                        this.showToast('‚úÖ Sekarang bisa booking!');
                    }}
                ];
                
                steps.forEach(step => setTimeout(step.action, step.delay));
            },

            // ========== ARCHITECT MODE ==========
            architectTrigger: function() {
                if (this.userRole !== 'architect' && this.userRole !== 'master') {
                    this.showToast('üîì Klik 5x untuk Architect Mode');
                    return;
                }
                
                const secrets = `
üîê DREAM OS v13.0 - MASTER KEYS üîê

üë§ USER: ${this.passwords.user}
üëë ADMIN: ${this.passwords.admin}
üèóÔ∏è ARCHITECT: ${this.passwords.architect}
üì¶ INVENTORY VAULT: ${this.passwords.inventory_vault}
üè¨ WAREHOUSE VAULT: ${this.passwords.warehouse_vault}
üîì MASTER KEY: ${this.passwords.master}

üìû PAK ERWIN: +62 888-6183-954
üìß TEKNISI: teknisi@alfikri.sch.id

üöÄ SYSTEM STATUS: PRODUCTION READY
‚ú® 22 SARANA ‚Ä¢ ISO STANDARD ‚Ä¢ NO GUEST MODE
`;
                
                alert(secrets);
                this.showToast('üèóÔ∏è Architect secrets revealed');
            }
        };

        // =========================================
        // INITIALIZE SYSTEM
        // =========================================
        window.addEventListener('DOMContentLoaded', function() {
            system.init();
        });
    </script>
</body>
</html>
